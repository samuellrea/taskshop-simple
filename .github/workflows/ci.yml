name: CI - TaskShop
on: [push, pull_request]

jobs:
  verify:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout c√≥digo
      uses: actions/checkout@v3
    
    - name: Configurar Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.12'
    
    - name: Verificar estructura
      run: |
        echo "‚úÖ Repositorio clonado correctamente"
        echo "üìÅ Estructura:"
        ls -la
        echo "üìÇ Archivos Python:"
        find . -name "*.py" -type f | head -10
    
    - name: Verificar archivos esenciales
      run: |
        echo "üîç Verificando archivos requeridos:"
        required=("src/" "README.md" "todo_en_uno.py" "pyproject.toml")
        for item in "${required[@]}"; do
          if [ -e "$item" ]; then
            echo "  ‚úÖ $item - EXISTE"
          else
            echo "  ‚ö†Ô∏è  $item - NO EXISTE"
          fi
        done
    
    - name: Prueba de concepto
      run: |
        echo "üöÄ Ejecutando prueba b√°sica..."
        python3 -c "
        # Prueba m√≠nima de funcionalidad
        print('=== PRUEBA TASKSHOP ===')
        print('1. Python funcionando ‚úÖ')
        
        # Simular productos
        productos = [
            {'name': 'Plantilla Excel', 'price': 9.99},
            {'name': 'Curso Python', 'price': 29.99}
        ]
        
        print(f'2. {len(productos)} productos simulados ‚úÖ')
        
        # Simular carrito
        carrito = [productos[0]]
        total = sum(p['price'] for p in carrito)
        print(f'3. Carrito: 1 item, Total: ${total} ‚úÖ')
        
        print('üéØ Prueba completada exitosamente')
        "
